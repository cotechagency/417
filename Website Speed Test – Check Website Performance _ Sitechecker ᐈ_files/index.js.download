(function(){const Utils=(function(){const _getElementsArrayByClass=function(className,rootSelectionElement){rootSelectionElement=rootSelectionElement||document;try{const elements=Array.from(rootSelectionElement.getElementsByClassName(className));return elements.length?elements:[];}catch(err){return[];}};const _getElementsArrayBySelector=function(selector,rootSelectionElement){rootSelectionElement=rootSelectionElement||document;try{const elements=Array.from(rootSelectionElement.querySelectorAll(selector));return elements.length?elements:[];}catch(err){return[];}};const _getComputedStyle=function(element,styleName){try{return window.getComputedStyle(element,null).getPropertyValue(styleName);}catch(err){console.warn('Can not get computed styles!',err);}};const _copyToClipboard=function(str){const el=document.createElement('textarea');el.setAttribute('readonly','');el.style.position='absolute';el.style.left='-9999px';el.value=str;document.body.appendChild(el);el.select();document.execCommand('copy');document.body.removeChild(el);};const _inIframe=function(){try{return window.self!==window.top;}catch(e){return true;}};const _getEnv=function(){return SITE_ENV;};const _getProjectConstFn=function(){switch(_getEnv()){case'prod':case'dev':case'test':case'local':return{graphQlApi:'/app/',semscaleApp:(typeof SEMSCALE_APP_URL==='undefined')?('https://'+location.host+'/app/'):SEMSCALE_APP_URL,semscaleGraphQlApi:(typeof SEMSCALE_GRAPHQL_URL==='undefined')?('https://'+location.host+'/app/api/graphql'):SEMSCALE_GRAPHQL_URL,};default:console.warn('not exist environment');return null;}};return Object.freeze({getElementsArrayByClass:_getElementsArrayByClass,getComputedStyle:_getComputedStyle,copyToClipboard:_copyToClipboard,getEnv:_getEnv,getElementsArrayBySelector:_getElementsArrayBySelector,inIframe:_inIframe,CONST:_getProjectConstFn(),});}());function initProfileTabsLogic(){if(Utils.inIframe()){$('.widget-tabs').remove();}const profileTabs=Utils.getElementsArrayBySelector('[select-profile-tab]');profileTabs.forEach(function(el){el.addEventListener('click',function(){profileTabs.forEach(function(el){el.classList.remove('widget-tabs__tab--active')});el.classList.add('widget-tabs__tab--active');const tab=el.getAttribute('select-profile-tab');Utils.getElementsArrayBySelector('[profile-tab]').forEach(function(el){el.style.display='none';});Utils.getElementsArrayBySelector('[profile-tab='+tab+']')[0].style.display='flex';});});}function wpWidgetPageLogic(isIframeWidget){const iframeOrNotSelector=!isIframeWidget?':not(.iframe)':'.iframe';const widgetPreview=document.getElementById(isIframeWidget?'iframe-widget-preview':'widget-preview');if(!widgetPreview)return;const host=widgetPreview?widgetPreview.dataset.host:null;const newLine='\n';const widgetCodeEl=document.querySelector('.widget-code__text'+iframeOrNotSelector);let widgetCodeStr='<!-- sitechecker on page audit widget -->'+newLine+'<script>'+newLine+'  (function(d, s, id) {'+newLine+'    var js, fjs = d.getElementsByTagName(s)[0];'+newLine+'    if(d.getElementById(id)) return;'+newLine+'    js = d.createElement(s); js.id = id; '+newLine+'    js.src = "'+host+'/javascripts/widget.js?v='+Math.random().toString()+'";'+newLine+'    fjs.parentNode.insertBefore(js, fjs);'+newLine+'  }(document, "script", "sitechecker-jssdk"));'+newLine+'</script>'+newLine+'<div id="sitechecker'+(isIframeWidget?'-iframe':'')+'-widget-root" data-language="en" data-color="rgb(0, 102, 255)" data-host="'+host+'"></div>'+newLine+'<!-- /sitechecker on page audit widget -->';const setWidgetCodeInDOM=function(){widgetCodeEl.innerHTML=widgetCodeStr.replace(/^\s\s/mgi,'&ensp;').replace(/^\s\s\s\s/mgi,'&emsp;').replace(/\</mgi,'&lt;').replace(/\>/mgi,'&gt;');};setWidgetCodeInDOM();const setColorOfWidget=function(color){widgetCodeStr=widgetCodeStr.replace(/data-color="(.+?)"/mgi,'data-color="'+color+'"');setWidgetCodeInDOM();};const setLanguageOfWidget=function(lang){widgetCodeStr=widgetCodeStr.replace(/data-language="(.+?)"/mgi,'data-language="'+lang+'"');setWidgetCodeInDOM();};Utils.getElementsArrayBySelector('.select-color__tile'+iframeOrNotSelector).forEach(function(el){el.addEventListener('click',function(e){const color=Utils.getComputedStyle(el,'background-color');Utils.getElementsArrayBySelector('.scw'+iframeOrNotSelector).forEach(function(elem){elem.style.backgroundColor=color;});setColorOfWidget(color);});});document.querySelector('.widget-code__btn'+iframeOrNotSelector).addEventListener('click',function(e){Utils.copyToClipboard(widgetCodeStr);});if(isIframeWidget)Utils.getElementsArrayBySelector('.language_menu.widget a').forEach(function(el){el.addEventListener('click',function(e){const selectedValEl=document.querySelector('.language_menu.widget>li>a');const prevLang=selectedValEl.title;const currLang=e.target.title;const widgetEl=document.querySelector('.language_menu.widget');setLanguageOfWidget(currLang);selectedValEl.title=currLang;widgetEl.classList.remove(prevLang);widgetEl.classList.add(currLang);});});}function iframeWidgetLogic(){if(!Utils.inIframe())return;const hideElement=function(el){try{el.style.display='none';}catch(err){}};document.querySelector('body').classList.add('in-iframe');Utils.getElementsArrayBySelector('header').forEach(hideElement);Utils.getElementsArrayBySelector('.footer').forEach(hideElement);}document.addEventListener('DOMContentLoaded',function(){initProfileTabsLogic();try{window.Utils=Utils;}catch(err){}try{wpWidgetPageLogic(false);wpWidgetPageLogic(true);}catch(err){}try{iframeWidgetLogic();}catch(err){}});}());